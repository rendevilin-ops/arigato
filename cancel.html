<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>äºˆç´„ã‚­ãƒ£ãƒ³ã‚»ãƒ«</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 40px;
      text-align: center;
    }

    .card {
      border: 1px solid #ddd;
      padding: 20px;
      margin: 20px auto;
      max-width: 400px;
      border-radius: 8px;
      text-align: left;
    }

    button {
      padding: 12px 24px;
      font-size: 16px;
      background: #c62828;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
</head>
<body>

<h2>Reservation Cancellation</h2>

<p id="message">äºˆç´„æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>

<div id="reservationCard" class="card" style="display:none;"></div>

<button id="cancelBtn" style="display:none;">
  ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹
</button>

<script>
async function loadReservation() {
  if (!id) {
    messageEl.innerText = "äºˆç´„IDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚";
    return;
  }

  try {
    const res = await fetch(
      `https://arigato-admin.vercel.app/api/reservations/get?id=${id}`
    );

    if (!res.ok) {
      messageEl.innerText = "äºˆç´„ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚";
      return;
    }

    const data = await res.json();
    reservationData = data.reservation;

    // äºˆç´„æƒ…å ±è¡¨ç¤º
    card.innerHTML = `
      <strong>Name:</strong> ${reservationData.FirstName} ${reservationData.LastName}<br>
      <strong>Date:</strong> ${reservationData.date}<br>
      <strong>Service:</strong> ${reservationData.service}<br>
      <strong>Arrival:</strong> ${reservationData.ArrivalTime}<br>
      <strong>Pax:</strong> ${reservationData.Pax}
    `;

    card.style.display = "block";

    // ğŸ”¥ äºŒé‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«é˜²æ­¢
    if (reservationData.Status === "cancelled") {
      messageEl.innerText =
        "ã“ã®äºˆç´„ã¯æ—¢ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚";
      btn.style.display = "none";
    } else {
      messageEl.innerText =
        "ã“ã®äºˆç´„ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã™ã‹ï¼Ÿ";
      btn.style.display = "inline-block";
    }

  } catch (err) {
    messageEl.innerText = "é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚";
  }
}
</script>

</body>
</html>
